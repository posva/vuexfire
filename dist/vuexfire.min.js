!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.VuexFire=t():e.VuexFire=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){function o(e){return"function"==typeof e.key?e.key():e.key}function i(e){return"function"==typeof e.ref?e=e.ref():"object"==typeof e.ref&&(e=e.ref),e}function r(e){return"[object Object]"===Object.prototype.toString.call(e)}function u(e){var t=e.val(),n=r(t)?t:{".value":t};return n[".key"]=o(e),n}function s(e,t){for(var n=0;n<e.length;n++)if(e[n][".key"]===t)return n;return-1}function c(e,t,n){var o=!1,u=null,s=y.modules.getModuleFromKey(t),c=y.modules.getKey(t);if(r(n)&&n.hasOwnProperty("source")&&(o=n.asObject,u=n.cancelCallback,n=n.source),!r(n))throw new Error("VuexFire: invalid Firebase binding source.");if(!y.vuex.isKeyInState(e.$store.state,s,c))throw new Error('VuexFire: bind failed: "'+(s&&s+"/"||"")+c+'" is not defined in the store state');var l=i(n);e.$firebaseRefs[t]=l,e._firebaseSources[t]=n,o?f(e,t,s,c,n,u):a(e,t,s,c,n,u)}function a(e,t,n,i,r,c){var a=e.$store.state;e.$store.commit(y.vuex.getMutationName(n,$),{key:i,value:[],module:n});const f=r.on("child_added",function(t,o){const r=y.vuex.get(a,n,i),c=o?s(r,o)+1:0;e.$store.commit(y.vuex.getMutationName(n,x),{key:i,index:c,record:u(t)})},c),l=r.on("child_removed",function(t){const r=y.vuex.get(a,n,i),u=s(r,o(t));e.$store.commit(y.vuex.getMutationName(n,h),{key:i,index:u})},c),d=r.on("child_changed",function(t){const r=y.vuex.get(a,n,i),c=s(r,o(t));e.$store.commit(y.vuex.getMutationName(n,p),{key:i,index:c,record:u(t)})},c),m=r.on("child_moved",function(t,r){const c=y.vuex.get(a,n,i),f=s(c,o(t));var l=r?s(c,r)+1:0;l+=f<l?-1:0,e.$store.commit(y.vuex.getMutationName(n,g),{key:i,index:f,newIndex:l,record:u(t)})},c);e._firebaseListeners[t]={child_added:f,child_removed:l,child_changed:d,child_moved:m}}function f(e,t,n,o,i,r){const s=i.on("value",function(t){e.$store.commit(y.vuex.getMutationName(n,v),{key:o,record:u(t)})},r);e._firebaseListeners[t]={value:s}}function l(e,t){var n=y.modules.getModuleFromKey(t),o=e._firebaseSources&&e._firebaseSources[t];if(!o)throw new Error('VuexFire: unbind failed: "'+t+'" is not bound to a Firebase reference.');e.$store.commit(y.vuex.getMutationName(n,v),{key:t,record:null});const i=e._firebaseListeners[t];for(var r in i)o.off(r,i[r]);e.$firebaseRefs[t]=null,e._firebaseSources[t]=null,e._firebaseListeners[t]=null}function d(e){if(!e.$firebaseRefs){if(e.$firebaseRefs=Object.create(null),e._firebaseSources=Object.create(null),e._firebaseListeners=Object.create(null),!e.$store)throw new Error("VuexFire: missing Vuex. Install Vuex before VuexFire");e.$store.commit||(b(e.$store),e.$store.commit=e.$store.dispatch)}}function m(e){e.mixin(k);const t=e.config.optionMergeStrategies;t.firebase=t.methods,e.prototype.$bindAsObject=function(e,t,n){d(this),c(this,e,{source:t,asObject:!0,cancelCallback:n})},e.prototype.$bindAsArray=function(e,t,n){d(this),c(this,e,{source:t,cancelCallback:n})},e.prototype.$unbind=function(e){l(this,e)}}function b(e){for(var t in m.mutations)e._mutations[t]=m.mutations[t]}var y=n(2);const v="VUEXFIRE/objectValue",p="VUEXFIRE/arrayChange",x="VUEXFIRE/arrayAdd",h="VUEXFIRE/arrayRemove",g="VUEXFIRE/arrayMove",$="VUEXFIRE/initWithValue",k={beforeDestroy:function(){if(this.$firebaseRefs){for(var e in this.$firebaseRefs)this.$firebaseRefs[e]&&this.$unbind(e);this.$firebaseRefs=null,this._firebaseSources=null,this._firebaseListeners=null}},created:function(){var e=this.$options.firebase;if("function"==typeof e&&(e=e.call(this)),e){d(this);for(var t in e)c(this,t,e[t])}}};m.mutations={},m.mutations[v]=function(e,t){e[t.key]=t.record},m.mutations[p]=function(e,t){e[t.key].splice(t.index,1,t.record)},m.mutations[x]=function(e,t){e[t.key].splice(t.index,0,t.record)},m.mutations[h]=function(e,t){e[t.key].splice(t.index,1)},m.mutations[g]=function(e,t){const n=e[t.key];n.splice(t.newIndex,0,n.splice(t.index,1)[0])},m.mutations[$]=function(e,t){t.module?y.walkObject(e,t.module.split("/"))[t.key]=t.value:e[t.key]=t.value},m.moduleMutations=function(e){return Object.keys(m.mutations).reduce(function(t,n){return t[e.replace(".","/")+"/"+n]=m.mutations[n],t},{})},e.exports=m,"undefined"!=typeof window&&window.Vue&&m(window.Vue)},function(e,t,n){t.modules=n(3),t.vuex=n(4)},function(e,t){t.getModuleFromKey=function(e){var t=e.split(".");return t.slice(0,t.length-1).reduce(function(e,t){return e?e+"/"+t:t},"")},t.getKey=function(e){var t=e.split(".");return t[t.length-1]||""}},function(e,t){function n(e,t){return t.reduce(function(e,t){return e[t]},e)}t.isKeyInState=function(e,t,o){return void 0!==(t?n(e,t.split("/"))[o]:e[o])},t.get=function(e,t,o){return t?n(e,t.split("/"))[o]:e[o]},t.getMutationName=function(e,t){return e?e+"/"+t:t}}])});